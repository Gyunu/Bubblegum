!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),i=new o.App,r=n(2).Sidewalk,a=n(7),s=n(11);window.document.addEventListener("DOMContentLoaded",i.onLoad),window.addEventListener("bubblegum.loaded",function(){r.registerRoute({name:"index",url:"/",onLoad:function(t){a.Index.run()},onUnload:function(){return{fuck:"you"}}}),r.registerRoutes({urls:[{name:"sections",url:"/sections",onLoad:function(t){console.log("sections")}},{name:"sections.edit",url:"/sections/edit",onLoad:function(t){console.log("edit")}},{name:"sections.search",url:"/sections/search",onLoad:function(t){console.log("search")}},{name:"sections.remove",url:"/sections/remove",onLoad:function(t){console.log("remove")}},{name:"sections.add",url:"/sections/add",onLoad:function(t){console.log("add")}},{name:"sections.id",url:"/sections/(:number)",onLoad:function(t){console.log("loading sections.id"),s.Sections.run(t)}}]}),r.run()})},function(t,e){"use strict";var n=function(){function t(){}return t.prototype.onLoad=function(){var t=new CustomEvent("bubblegum.loaded",{cancelable:!1,bubbles:!0});window.dispatchEvent(t)},t}();e.App=n},function(t,e,n){"use strict";var o,i=n(3),r=n(4),a=n(5),s=n(6);!function(t){function e(){for(;t.updateQueue.length;){t.updateQueue.shift().update()}window.requestAnimationFrame(e)}function n(){s.Router.run(),window.requestAnimationFrame(e)}function o(e){var n=[];return t.liveComponents.forEach(function(t){(t.name=e)&&n.push(t)}),n}function u(e){var n=t.components[e],o=new a.Template(n.template),r=new i.Controller(e,o);return t.liveComponents.push(r),r}function c(e){var n=t.models[e],o=new r.Model(n);return o}function l(e){return t.routes[e]}function d(e){"undefined"==typeof t.components[e.name]&&(t.components[e.name]=e)}function f(e){"undefined"==typeof t.models[e.name]&&(t.models[e.name]=e)}function p(e){var n=e.url.split("/").filter(function(t){return""!=t});n.length||"/"!=e.url||(n=["/"]);var o=n.map(function(t){var e=new RegExp(":.+?$"),n=t.match(e),o="";return n?(t.indexOf("number")>-1&&(o="\\d+"),t.indexOf("any")>-1&&(o=".+")):o=t,o}),i=o.join("\\/")+"$";t.routes[e.name]={},t.routes[e.name].regex=i,t.routes[e.name].onLoad=e.onLoad||function(){},t.routes[e.name].onUnload=e.onUnload||function(){}}function h(t){t.urls.forEach(function(t){p(t)})}t.update=e,t.models={},t.routes={},t.components={},t.liveComponents=[],t.updateQueue=[],t.run=n,t.getInstancesOf=o,t.getComponent=u,t.getModel=c,t.getRoute=l,t.registerComponent=d,t.registerModel=f,t.registerRoute=p,t.registerRoutes=h}(o=e.Sidewalk||(e.Sidewalk={}))},function(t,e){"use strict";var n=function(){function t(t,e){this.name=t,this.template=e}return t.prototype.attachTo=function(t){return this.template.attachTo(t),this},t.prototype.render=function(){return this.template.render(),this},t.prototype.update=function(){return this.template.update(),this},t.prototype.remove=function(){return this.template.remove(),this},t.prototype.on=function(t,e){window.document.addEventListener(t,function(t){for(var n=t.target;n&&n!=this;n=n.parentNode)if(n===this.template.dom){e.call(this,t);break}}.bind(this))},t}();e.Controller=n},function(t,e){"use strict";var n=function(){function t(t){this.urls={},this.name=t.name,this.urls=t.urls,this.host="http://localhost:3000","undefined"==typeof t.root?this.root="/"+this.name+"/":this.root="/"+t.root+"/";var e=null;Object.defineProperty(this,"data",{get:function(){return e},set:function(t){this.data=t}});for(var n in this.urls){var o=n.toString().charAt(0).toUpperCase()+n.toString().slice(1).toLowerCase();this["get"+o]=function(){var t=null;arguments.length>1&&(t=arguments[0]),console.log(t),this.get(n,t,arguments[arguments.length-1])}.bind(this)}}return t.prototype.updateModel=function(t){var e=!1;return e},t.prototype.refreshModel=function(t){},t.prototype.getModelData=function(){},t.prototype.get=function(t,e,n){console.log(arguments);var o="all"==t?"":null===e?"":e,i=this.host+this.root+this.urls[t].replace("(:"+t+")",o),r=new XMLHttpRequest;r.open("GET",i,!0),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(this.data=JSON.parse(r.responseText),n(this.data))},r.send()},t}();e.Model=n},function(t,e,n){"use strict";var o=n(2),i=[];for(var r in document){var a=r.match(/^on(.*)/);a&&i.push("on"+a[1])}var s=function(){function t(t){this.flaggedForRemove=!1,this.template=t,this.virtualdom=document.createDocumentFragment();var e=new DOMParser,n=e.parseFromString(this.template,"text/html"),o=n.querySelector("body").childNodes[0];this.virtualdom.insertBefore(o,null),this.getTemplateContent(this.virtualdom),this.dom=this.virtualdom.cloneNode(!0)}return t.prototype.update=function(){this.dom.normalize();var t,e,n=this.virtualdom.cloneNode(!0);if(null===this.dom.parentNode?t=this.root:(t=this.dom.parentNode,e=this.dom.nextSibling,t.removeChild(this.dom)),!this.flaggedForRemove){t.insertBefore(n,e);var o=this.root.childNodes;this.dom=o.item(o.length-1),this.flaggedForRemove=!1}return this},t.prototype.render=function(){return o.Sidewalk.updateQueue.push(this),this},t.prototype.remove=function(){this.flaggedForRemove=!0,o.Sidewalk.updateQueue.push(this),i.forEach(function(t){this.dom.removeEventListener(this)}.bind(this))},t.prototype.attachTo=function(t){return this.root=t,this},t.prototype.cleanData=function(){for(var t in this)this.hasOwnProperty(t)&&(delete this[t],this["_"+t]=null);return this},t.prototype.getTemplateContent=function(t){for(var e=new RegExp("{{[a-z]+}}","gmi"),n=t.firstChild,i=function(){if(n.nodeType===t.TEXT_NODE){var i=n.textContent.match(e);if(i)for(var a=function(){var t=i.shift(),e=t.length,a=n.textContent.indexOf(t),s=n.splitText(a),u=s.splitText(e),c=s.textContent.replace("{{","").replace("}}","").replace(/ /g,"");r["_"+c]="",s.textContent="",Object.defineProperty(r,c,{get:function(){return this["_"+c]},set:function(t){this["_"+c]=t,s.textContent=t,o.Sidewalk.updateQueue.push(this)}}),n=u};i.length;)a()}else if(n.nodeType===t.ELEMENT_NODE){if(n.getAttribute("href")){var s=n.getAttribute("href"),u=s.match(e),c=n;if(u)for(var l=function(){var t=u.shift(),e=(t.length,t.replace("{{","").replace("}}","").replace(/ /g,"")),n=s.split("/"),i=n.indexOf(t);r["_"+e]="",Object.defineProperty(r,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,n[i]=t,c.setAttribute("href",n.join("/")),o.Sidewalk.updateQueue.push(this)}})};u.length;)l()}r.getTemplateContent(n)}n=n.nextSibling},r=this;n;)i()},t}();e.Template=s},function(t,e,n){"use strict";var o,i=n(2);!function(t){function e(){window.document.addEventListener("click",function(t){for(var e=t.target;e&&e!=this;e=e.parentNode)if("A"===e.tagName){var o=e.getAttribute("href");-1==o.indexOf("http://")&&(t.preventDefault(),n(o));break}},!0)}function n(t){var e={};"undefined"!=typeof r&&"undefined"!=typeof r.onUnload&&(e=r.onUnload());for(var n in i.Sidewalk.routes){var o=new RegExp(i.Sidewalk.routes[n].regex.toString()),a=t.match(o);a&&(r=i.Sidewalk.routes[n],i.Sidewalk.routes[n].onLoad(e),window.history.pushState({},"",t))}}function o(){e(),n(window.location.pathname)}var r;t.run=o}(o=e.Router||(e.Router={}))},function(t,e,n){"use strict";var o,i=n(2).Sidewalk,r=n(8),a=n(9),s=n(10);!function(t){function e(){var t=[],e=i.getModel("sections");e.getAll(function(e){e.forEach(function(e){var n=i.getComponent("listitem").attachTo(document.querySelectorAll(".list")[0]);n.template.title=e.name,n.template.count=e.entries,n.template.id=e.id,n.render(),n.on("click",function(t){console.log("clicked")}),t.push(n)})})}i.registerModel({name:"sections",root:"sections",urls:{all:"(:all)",id:"(:id)"}}),i.registerComponent({name:"list",template:a}),i.registerComponent({name:"listitem",template:s}),i.registerComponent({name:"bar",template:r});i.getComponent("bar").attachTo(document.querySelectorAll("body")[0]).render(),i.getComponent("list").attachTo(document.querySelectorAll("body")[0]).render();t.run=e}(o=e.Index||(e.Index={}))},function(t,e){t.exports='<div class="d-2 t-10 p-10 no-gutter"> <div class="action d-10 no-gutter t-10 no-gutter p-10 no-gutter"> <div class="action__pane d-10 t-10 p-10"> <a class="action__button button button--nuetral left" bt-action=section.edit bt-default=nuetral href=/sections/edit><i class="fa fa-pencil" aria-hidden=true></i></a> <div class="search left no-gutter"> <a class="action__button button button--nuetral arrow left search__button" bt-action=entries.search bt-default=nuetral href=/sections/search><i class="fa fa-search" aria-hidden=true></i></a> <input type=text class="input__text input__text--active search__input search__input--hidden" value="" name=search[sections] placeholder="Search all entries..."> </div> <a class="action__button button button--positive right" bt-action=section.add bt-default=positive href=/sections/add><i class="fa fa-plus" aria-hidden=true></i></a> <a class="action__button button button--negative right" bt-action=section.remove bt-default=negative href=/sections/remove><i class="fa fa-minus" aria-hidden=true></i></a> </div> </div> </div>'},function(t,e){t.exports='<div class="content no-gutter d-2 t-10 p-10"> <div class="content__pane d-10 t-10 p-10"> <div class=list> </div> </div> </div>'},function(t,e){t.exports='<a class="list__item arrow" href=/sections/{{id}}> <h1 class=list__title>{{title}}</h1> <span class=list__notification>{{count}}</span> </a>'},function(t,e,n){"use strict";var o,i=n(2).Sidewalk;!function(t){function e(t){var e=i.getModel("sections");console.log(e),e.getId(function(t,e){console.log("model data"),console.log(e)})}i.registerModel({name:"sections",root:"sections",urls:{all:"(:all)",id:"(:id)"}}),t.run=e}(o=e.Sections||(e.Sections={}))}]);
//# sourceMappingURL=min.bubblegum.js.map